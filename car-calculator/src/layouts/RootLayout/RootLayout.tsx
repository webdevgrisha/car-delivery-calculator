import { Outlet, NavLink, useMatch } from 'react-router-dom';

import './RootLayout.css';
import { useState } from 'react';

import { userSignOut } from '../../services/firebase/auth';
import { useAuth } from '../../utils/AuthProvider';

export default function RootLayout() {
  const match = useMatch('/settings/*');
  const userData = useAuth();

  const email = userData.currentUser.email;
  const role = userData.currentUser.role;
  console.log('Auth: ', userData.currentUser.email);
  // console.log('match: ', match);
  // const [isSettingActive, setSettingActive] = useState<boolean>(false);

  const mainNavClass = match ? 'remove-p' : '';
  return (
    <div className="root-layout">
      <header>
        <div className="logo">
          <img src="logo-black.png" alt="liberty cars logo" />
        </div>
        <div className="account-info email">
          <span className="icon">
            <svg
              xmlns="http://www.w3.org/2000/svg"
              fill="none"
              width="100%"
              height="100%"
              version="1.1"
              id="Icons"
              viewBox="0 0 32 32"
            >
              <g>
                <g>
                  <path
                    d="M16,16.8l13.8-9.2C29.2,5.5,27.3,4,25,4H7C4.7,4,2.8,5.5,2.2,7.6L16,16.8z"
                    fill="#216DD1"
                  />
                </g>
                <g>
                  <path
                    d="M16.6,18.8C16.4,18.9,16.2,19,16,19s-0.4-0.1-0.6-0.2L2,9.9V23c0,2.8,2.2,5,5,5h18c2.8,0,5-2.2,5-5V9.9L16.6,18.8z"
                    fill="#216DD1"
                  />
                </g>
              </g>
            </svg>
          </span>
          <p>{email}</p>
          {/* <p>libertycartrade@gmail.com</p> */}
        </div>
        <div className="account-info status">
          <span className="icon">
            <svg
              width="100%"
              height="100%"
              fill="none"
              xmlns="http://www.w3.org/2000/svg"
              viewBox="0 0 20 20"
            >
              <path
                fill-rule="evenodd"
                clip-rule="evenodd"
                d="M10.259 2.342c.977.119 1.796.513 2.476 1.191a3.935 3.935 0 0 1 1.129 2.087c.075.354.075 1.145 0 1.498a3.924 3.924 0 0 1-1.13 2.086c-.611.608-1.28.964-2.141 1.141-.354.073-1.156.073-1.526 0a4.03 4.03 0 0 1-2.109-1.114 3.952 3.952 0 0 1-1.155-2.113c-.075-.353-.075-1.144 0-1.498a4.328 4.328 0 0 1 .643-1.528c.191-.285.785-.872 1.066-1.056a4.355 4.355 0 0 1 1.538-.638c.245-.047.995-.082 1.209-.056Zm1.207 9.019c1.699.203 3.233 1.155 4.221 2.62.58.858.911 1.869.97 2.952.018.331.015.37-.046.486a.417.417 0 0 1-.185.187c-.119.06-.165.06-6.593.06-6.427 0-6.473 0-6.592-.06a.417.417 0 0 1-.186-.187c-.06-.116-.063-.155-.045-.486A5.794 5.794 0 0 1 4.699 13.1a5.883 5.883 0 0 1 3.642-1.756c.46-.046 2.703-.035 3.125.016Z"
                fill="#216DD1"
              ></path>
            </svg>
          </span>
          <p>{role}</p>
        </div>
        <button className="logout-btn" onClick={userSignOut}>
          Logout
        </button>
      </header>
      <div className="app-container">
        <nav className={'main-nav ' + mainNavClass}>
          <NavLink className="nav-link" to="/">
            <span className="icon">
              <svg
                width="100%"
                height="100%"
                fill="none"
                xmlns="http://www.w3.org/2000/svg"
                viewBox="0 0 26 26"
                color="#216DD1"
              >
                <path
                  fill-rule="evenodd"
                  clip-rule="evenodd"
                  d="M6.286 3.08a.442.442 0 0 0-.24.244c-.048.108-.256 1.479-.645 4.243l-.574 4.084-.914 2.301C3.41 15.217 3 16.299 3 16.355c0 .056.034.175.074.263.069.152.331.327 4.815 3.209a646.103 646.103 0 0 0 4.868 3.112c.16.081.333.081.492 0 .069-.036 2.257-1.435 4.864-3.11 4.377-2.812 4.745-3.057 4.82-3.205a.495.495 0 0 0 .063-.307c-.011-.081-.424-1.164-.918-2.407l-.899-2.259-.575-4.084c-.386-2.74-.597-4.136-.644-4.243a.43.43 0 0 0-.243-.245c-.221-.107-.367-.106-.545.004-.078.049-1.133 1.178-2.345 2.511l-2.202 2.423H11.38L9.18 5.594c-1.212-1.333-2.267-2.462-2.345-2.51-.179-.11-.33-.112-.548-.004Zm3.896 8.813c.186.14.257.272.257.48 0 .575-.734.792-1.06.314-.186-.272-.077-.677.225-.833a.607.607 0 0 1 .578.04Zm6.22-.037c.378.19.426.74.087.981a.56.56 0 0 1-.731-.039c-.501-.44.047-1.242.644-.942Zm-5.18 5.46c.537.615 1.042 1.232 1.128 1.378.086.146.2.311.252.368.196.212.606.212.802 0 .053-.057.166-.223.252-.368.086-.146.591-.763 1.129-1.378l.973-1.114.156.021c.086.012 1.176.136 2.423.275s2.29.257 2.319.262c.028.006-1.682 1.124-3.8 2.484l-3.854 2.475-3.852-2.475c-2.856-1.834-3.83-2.477-3.761-2.486.138-.02 4.733-.545 4.801-.55.033-.003.497.496 1.032 1.109Z"
                  fill="#216DD1"
                ></path>
              </svg>
            </span>
            <p>CarFax</p>
          </NavLink>
          <NavLink className="nav-link" to="autocheck">
            <span className="icon">
              <svg
                width="100%"
                height="100%"
                fill="none"
                xmlns="http://www.w3.org/2000/svg"
                viewBox="0 0 24 24"
                color="#216DD1"
              >
                <path
                  fill-rule="evenodd"
                  clip-rule="evenodd"
                  d="M20.197 5.07c-.104.036-.242.1-.305.143-.063.042-1.898 1.765-4.076 3.828l-5.052 4.783-1.091 1.03-2.13-2.12c-1.17-1.167-2.24-2.207-2.377-2.31-.687-.519-1.642-.303-2.061.467-.152.279-.137.827.032 1.129.084.152 1.064 1.162 2.714 2.798 1.42 1.409 2.711 2.673 2.868 2.81.312.273.57.372.969.372.557-.001.364.166 6.38-5.535 3.075-2.912 5.644-5.366 5.71-5.451.37-.48.264-1.301-.216-1.69a1.475 1.475 0 0 0-1.365-.254Z"
                  fill="#216DD1"
                ></path>
              </svg>
            </span>
            <p>Autocheck</p>
          </NavLink>
          <NavLink className="nav-link" to="sticker">
            <span className="icon">
              <svg
                width="100%"
                height="100%"
                fill="none"
                xmlns="http://www.w3.org/2000/svg"
                viewBox="0 0 24 24"
                color="#216DD1"
              >
                <path
                  fill-rule="evenodd"
                  clip-rule="evenodd"
                  d="M8.02 4.934c-.268.027-.676.166-1.026.349-.275.143-.48.319-1.376 1.18L4.565 7.474l-.048-.209c-.116-.511-.33-.656-.963-.654-.637.002-1.157.186-1.38.487-.115.155-.139.44-.053.642.139.327.651.727 1.134.886.066.022-.03.138-.573.688-.707.716-.929 1.03-1.177 1.671-.263.677-.288.916-.288 2.715 0 1.786.022 2 .25 2.465.07.14.19.34.268.442l.143.187.02.675c.016.583.031.703.11.865.126.26.323.45.598.58.228.107.247.11 1.18.11.906 0 .957-.005 1.167-.1.24-.108.533-.395.622-.608.03-.074.07-.262.086-.418l.03-.285H18.31l.03.285c.016.156.055.344.086.418.088.213.381.5.621.608.21.095.262.1 1.168.1.933 0 .952-.003 1.18-.11.274-.13.471-.32.597-.58.079-.162.094-.282.111-.864l.02-.676.142-.187c.078-.103.2-.302.268-.442.229-.465.25-.68.25-2.465 0-1.799-.024-2.038-.287-2.715-.249-.64-.47-.955-1.177-1.671-.543-.55-.64-.666-.573-.688.482-.159.995-.56 1.134-.886.266-.628-.365-1.126-1.433-1.13-.634-.001-.848.144-.964.655l-.047.21-1.053-1.012c-1.122-1.077-1.306-1.212-1.965-1.44l-.268-.094-3.981-.006c-2.19-.003-4.057.001-4.15.01Zm7.945 1.149c.505.094.65.204 2.06 1.567l1.317 1.273-3.67.011c-2.02.006-5.324.006-7.343 0l-3.67-.01L5.975 7.65C7.363 6.31 7.533 6.177 7.998 6.087c.272-.053 7.684-.057 7.967-.004ZM3.644 10.758c.585.178 1.548.753 2.03 1.213.889.847.316 1.218-1.813 1.174-.74-.016-.833-.026-1.035-.116-.274-.12-.566-.434-.659-.705-.233-.684.17-1.449.848-1.608.245-.058.318-.053.629.042Zm17.561.034c.541.24.83.943.628 1.532-.092.27-.385.584-.658.705-.203.09-.296.1-1.035.116-2.13.044-2.701-.325-1.812-1.173.476-.454 1.385-1.005 1.987-1.203.338-.112.601-.105.89.023ZM16.93 12.47c-.003.69-.419 1.47-.932 1.743l-.184.098H12c-3.664 0-3.818-.003-3.96-.08a1.436 1.436 0 0 1-.57-.514 2.626 2.626 0 0 1-.388-1.142l-.023-.305h9.87v.2ZM5.912 15.496c.394.454.722.841.73.861.008.02-.624.036-1.404.036H3.822l-.31-.129c-.53-.22-.865-.603-.864-.989 0-.091.047-.265.104-.386l.103-.221 1.17.002 1.172.002.716.824Zm15.336-.607c.259.556-.025 1.07-.76 1.375l-.31.129H18.76c-.78 0-1.411-.015-1.403-.035.007-.019.336-.406.73-.86l.716-.825 1.17-.003 1.172-.002.103.22Zm-4.719.441a1.32 1.32 0 0 1-.407.745c-.373.335-.16.318-4.123.318s-3.75.017-4.122-.318a1.32 1.32 0 0 1-.408-.745l-.029-.157H16.559l-.029.157Z"
                  fill="#216DD1"
                ></path>
              </svg>
            </span>
            <p>Sticker</p>
          </NavLink>
          <NavLink className="nav-link" to="clients">
            <span className="icon">
              <svg
                width="100%"
                height="100%"
                fill="none"
                xmlns="http://www.w3.org/2000/svg"
                viewBox="0 0 24 24"
                color="#216DD1"
              >
                <path
                  fill-rule="evenodd"
                  clip-rule="evenodd"
                  d="M12.704 2.55c1.65.402 2.777 2.005 2.689 3.82-.06 1.218-.615 2.26-1.566 2.937-.637.453-1.454.663-2.193.563-1.695-.23-2.937-1.666-3.027-3.5-.06-1.229.455-2.43 1.354-3.156a4.01 4.01 0 0 1 1.158-.622c.33-.1 1.249-.125 1.585-.043Zm6.728 2.732c.315.096.507.2.768.416 1.019.844 1.121 2.5.215 3.489-.427.466-.932.696-1.526.696-1.008 0-1.862-.741-2.094-1.817-.244-1.128.361-2.332 1.37-2.724.31-.121.965-.152 1.267-.06Zm-13.777 0c.315.096.507.2.768.416 1.019.844 1.121 2.5.215 3.489-.427.466-.932.696-1.526.696-1.008 0-1.862-.741-2.094-1.817-.244-1.128.361-2.332 1.37-2.724.31-.121.965-.152 1.267-.06Zm7.186 6.063c1.165.185 1.839.463 2.564 1.058a4.766 4.766 0 0 1 1.605 2.406c.268.907.338 1.895.288 4.067l-.035 1.516-.109.241c-.143.32-.382.574-.692.735l-.255.132h-4.011c-4.243 0-4.368-.005-4.78-.198-.231-.109-.439-.35-.577-.672l-.103-.24-.012-2.095c-.012-2.293.007-2.604.21-3.304.518-1.795 1.972-3.244 3.579-3.568.285-.058 2.077-.117 2.329-.078Zm7.163.087c.855.224 1.601.986 1.882 1.922l.114.378v5.506l-.088.18c-.139.283-.31.468-.55.597l-.223.12-1.248.013c-.686.008-1.29.003-1.34-.011l-.094-.026.007-1.824c.008-1.896-.017-2.375-.164-3.155-.208-1.103-.694-2.147-1.36-2.922l-.175-.206.093-.086c.171-.158.716-.428.993-.49.375-.086 1.821-.083 2.153.004ZM6.165 11.43c.294.07.751.296.933.463l.126.117-.234.285c-.667.813-1.089 1.736-1.29 2.821-.138.74-.165 1.287-.161 3.171l.004 1.824-.094.026c-.05.014-.645.019-1.32.011-1.158-.013-1.24-.02-1.41-.105a1.464 1.464 0 0 1-.614-.632L2 19.195v-5.463l.115-.381c.282-.941 1.034-1.7 1.9-1.922.34-.086 1.785-.086 2.15 0Z"
                  fill="#216DD1"
                ></path>
              </svg>
            </span>
            <p>Clients</p>
          </NavLink>
          <NavLink className="nav-link" to="calculator">
            <span className="icon">
              <svg
                width="100%"
                height="100%"
                fill="none"
                xmlns="http://www.w3.org/2000/svg"
                viewBox="0 0 24 24"
                color="#216DD1"
              >
                <path
                  fill-rule="evenodd"
                  clip-rule="evenodd"
                  d="M17.604 2.011c.436.1.712.258.97.556.187.216.283.4.367.708.053.192.059 1.013.059 8.725 0 9.25.012 8.664-.189 9.09-.168.356-.61.734-.99.849-.27.081-11.372.081-11.642 0-.38-.115-.822-.493-.99-.85C4.988 20.665 5 21.252 5 12c0-9.246-.012-8.664.188-9.087.157-.334.562-.699.93-.84.155-.059.645-.065 5.791-.07 3.092-.004 5.655 0 5.694.01Zm-10.245 3a.483.483 0 0 0-.209.179c-.08.13-.083.155-.083 1.148 0 .886.008 1.029.062 1.128.135.245-.145.231 4.799.231 4.943 0 4.663.014 4.798-.231.054-.1.062-.242.062-1.128 0-.993-.002-1.018-.083-1.148a.482.482 0 0 0-.209-.18c-.181-.067-8.956-.067-9.137 0Zm7.738 4.977c-.227.182-.249.252-.262.819-.01.456-.002.545.061.7.127.31.203.336.985.336.749 0 .831-.024.98-.283.067-.116.073-.182.064-.721-.012-.663-.035-.734-.284-.88-.112-.067-.195-.073-.785-.063-.6.01-.668.018-.76.092Zm-3.86-.022c-.238.132-.289.291-.289.908 0 .59.04.729.25.88.117.085.157.09.802.09s.684-.005.802-.09c.21-.151.25-.29.25-.88 0-.61-.051-.775-.282-.906-.12-.068-.21-.077-.762-.079-.56-.001-.643.007-.77.077ZM7.358 9.96c-.248.143-.271.216-.283.879-.01.54-.003.605.063.721.15.26.232.283.981.283.61 0 .682-.007.791-.079.2-.131.26-.332.26-.886.001-.501-.026-.638-.156-.79-.147-.174-.256-.197-.913-.199-.534-.001-.635.008-.743.071Zm7.731 3.801c-.212.14-.268.348-.254.957.013.578.038.651.284.831.113.083.156.088.758.088.703 0 .813-.028.962-.247.067-.098.077-.175.086-.704.01-.54.003-.605-.063-.721-.15-.26-.232-.283-.981-.283-.61 0-.682.007-.792.08Zm-3.89.01c-.212.152-.25.289-.25.888 0 .475.009.544.081.681.142.267.242.297.97.297s.828-.03.97-.297c.072-.137.08-.206.081-.68 0-.6-.038-.737-.25-.89-.117-.084-.156-.088-.801-.088s-.684.004-.802.088ZM7.33 13.76c-.238.156-.266.26-.255.926.01.529.019.606.086.704.149.219.259.247.962.247.602 0 .645-.005.758-.088.246-.18.27-.253.284-.83.01-.457.002-.546-.061-.701-.127-.31-.203-.336-.985-.336-.605 0-.682.008-.789.078Zm7.767 3.777c-.228.184-.249.25-.262.835-.013.625.018.752.232.927l.137.113h.674c.736 0 .804-.018.964-.248.064-.091.074-.176.083-.69.012-.69-.02-.798-.286-.95-.153-.088-.187-.092-.801-.08-.58.011-.65.02-.741.093Zm-7.739-.011c-.262.15-.295.26-.283.947.012.645.033.714.264.867.103.068.252.072 2.727.072 2.587 0 2.619-.001 2.718-.08.224-.18.249-.256.262-.789.007-.27.002-.551-.011-.624-.03-.17-.212-.394-.359-.44-.063-.02-1.236-.037-2.638-.039l-2.524-.003-.156.089Z"
                  fill="#216DD1"
                ></path>
              </svg>
            </span>
            <p>Calculator</p>
          </NavLink>

          <hr className="separator"></hr>

          <NavLink className="nav-link settings" to="settings">
            <span className="icon">
              <svg
                width="100%"
                height="100%"
                fill="none"
                xmlns="http://www.w3.org/2000/svg"
                viewBox="0 0 24 24"
                color="#7C8DB5"
              >
                <path
                  fill-rule="evenodd"
                  clip-rule="evenodd"
                  d="M10.777 1.85c-.198.05-.446.193-.6.347-.257.257-.322.464-.44 1.406-.058.468-.122.872-.142.898a.475.475 0 0 1-.182.093c-.08.025-.33.126-.555.225L8.45 5l-.147-.116c-.688-.545-1.208-.93-1.358-1.006-.244-.124-.63-.149-.936-.06-.227.065-.267.099-1.156.987-.888.888-.922.928-.987 1.155-.089.307-.064.692.06.936.05.098.307.455.57.794l.514.664c.025.033-.02.182-.142.457-.098.224-.2.473-.225.553a.473.473 0 0 1-.093.182c-.026.02-.432.084-.901.143-.945.12-1.148.183-1.404.439-.08.08-.194.238-.254.352l-.11.207v2.541l.104.222c.058.122.172.29.255.372.263.263.466.327 1.412.445.468.059.872.123.898.142.026.02.068.102.093.182.026.08.127.33.225.553.121.275.167.424.142.457l-.515.664c-.262.339-.518.696-.568.794-.125.245-.15.63-.06.936.065.226.104.272.927 1.102 1.026 1.035 1.091 1.078 1.615 1.078.3 0 .386-.015.535-.094.14-.075.685-.48 1.461-1.087.035-.028.143.003.358.1.169.078.428.183.577.234.194.067.274.116.286.173.009.044.062.445.118.892.114.904.18 1.11.44 1.37.082.082.25.197.372.254l.222.104h2.502l.222-.104c.122-.057.29-.172.372-.254.263-.263.327-.466.445-1.412.058-.468.125-.87.149-.895.024-.024.177-.094.341-.154.164-.061.404-.164.534-.228.281-.14.188-.183.995.447.328.256.676.506.774.556.245.124.63.15.937.06.225-.065.272-.105 1.102-.928 1.035-1.025 1.079-1.09 1.079-1.614 0-.45-.03-.508-.668-1.33l-.515-.664c-.025-.033.021-.182.142-.457.099-.224.2-.473.225-.553a.475.475 0 0 1 .093-.182c.027-.02.43-.083.899-.142.944-.118 1.138-.18 1.408-.445.085-.084.202-.251.259-.373l.103-.22v-2.502l-.104-.222a1.575 1.575 0 0 0-.255-.372c-.262-.263-.465-.327-1.411-.445-.468-.058-.872-.122-.899-.142a.475.475 0 0 1-.093-.182 8.23 8.23 0 0 0-.225-.553c-.12-.275-.167-.424-.142-.457l.515-.664c.263-.339.519-.696.57-.794.123-.244.148-.629.06-.936-.065-.227-.1-.267-.988-1.155s-.928-.922-1.155-.988c-.308-.088-.693-.063-.936.061-.099.05-.447.3-.775.556-.807.63-.714.588-.995.448a6.578 6.578 0 0 0-.534-.229 1.73 1.73 0 0 1-.341-.154c-.024-.025-.091-.427-.15-.895-.117-.946-.18-1.149-.444-1.411a1.576 1.576 0 0 0-.372-.255l-.222-.104-1.192-.007c-.655-.004-1.245.007-1.31.023Zm1.69 5.918c.49.056.908.173 1.327.372a4.18 4.18 0 0 1 2.067 2.06 4.196 4.196 0 0 1-.885 4.8c-1.279 1.237-3.14 1.556-4.72.81A4.005 4.005 0 0 1 9.08 15a4.196 4.196 0 0 1-.885-4.8 4.285 4.285 0 0 1 3.773-2.466c.088-.003.312.013.498.034Z"
                  fill="#7C8DB5"
                ></path>
              </svg>
            </span>
            <p>Settings</p>
          </NavLink>
        </nav>
        {match && (
          <nav className="settings-nav">
            <h3>Settings</h3>
            <NavLink className="nav-link" to="settings/profile">
              Profile
            </NavLink>
            <NavLink className="nav-link" to="settings/users">
              Users
            </NavLink>
            <NavLink className="nav-link" to="settings/calculator">
              Calculator
            </NavLink>
            <NavLink className="nav-link" to="settings/shipping">
              Shipping
            </NavLink>
          </nav>
        )}

        <main>
          <Outlet />
        </main>
      </div>
    </div>
  );
}
